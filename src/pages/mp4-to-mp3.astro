---
import BaseLayout from "../layouts/BaseLayout.astro";
import SITE from "../consts";

const pagePath = "/mp4-to-mp3";
const pageUrl = new URL(pagePath, SITE.url).toString();
const homeUrl = new URL("/", SITE.url).toString();

// âœ… Client script'i Vite Ã¼zerinden URL olarak alÄ±yoruz (DOÄRU YOL)
import mp4ClientUrl from "../scripts/mp4-to-mp3-client.js?url";
---

<BaseLayout
    title="Saku MP4 to MP3 â€“ Videoâ€™dan MP3 Ã‡evir (TarayÄ±cÄ± Ä°Ã§i, Ãœcretsiz)"
    description="Saku Convert ile MP4 videonu MP3â€™e Ã§evir. Ãœcretsiz MP4â†’MP3 dÃ¶nÃ¼ÅŸtÃ¼rÃ¼cÃ¼: iÅŸlemler tarayÄ±cÄ±da, upload yok. Gizlilik dostu."
    canonical={pagePath}
    lang="tr"
    ogImage="/og/og-mp4-to-mp3.png"
    jsonLd={[
        // WebPage entity
        {
            "@type": "WebPage",
            "@id": `${pageUrl}#webpage`,
            url: pageUrl,
            name: "Saku MP4 to MP3 (Videoâ€™dan MP3 Ã‡evirici)",
            alternateName: [
                "Saku MP4 to MP3",
                "Saku video dÃ¶nÃ¼ÅŸtÃ¼rÃ¼cÃ¼",
                "MP4 MP3 Ã§evirici",
                "MP4'Ã¼ MP3'e dÃ¶nÃ¼ÅŸtÃ¼r",
                "Online MP4 to MP3",
                "TarayÄ±cÄ± iÃ§i MP4 to MP3",
                "Ãœcretsiz MP4 to MP3",
            ],
            inLanguage: ["tr", "en"],
            isPartOf: { "@id": `${SITE.url}/#website` },
            about: { "@id": `${SITE.url}/#organization` },
            description:
                "Saku Convert ile MP4 videolarÄ±nÄ±zÄ± tarayÄ±cÄ± iÃ§inde MP3â€™e dÃ¶nÃ¼ÅŸtÃ¼rÃ¼n. DosyalarÄ±nÄ±z sunucuya yÃ¼klenmez, iÅŸlem cihazÄ±nÄ±zda gerÃ§ekleÅŸir.",
            primaryImageOfPage: {
                "@type": "ImageObject",
                url: new URL("/og/og-mp4-to-mp3.png", SITE.url).toString(),
                width: 1200,
                height: 630,
            },
            mainEntity: { "@id": `${pageUrl}#app` },
        },

        // SoftwareApplication entity
        {
            "@type": "SoftwareApplication",
            "@id": `${pageUrl}#app`,
            name: "MP4 to MP3",
            applicationCategory: "MultimediaApplication",
            operatingSystem: "Web",
            url: pageUrl,
            inLanguage: "tr",
            isAccessibleForFree: true,
            offers: {
                "@type": "Offer",
                price: "0",
                priceCurrency: "TRY",
            },
            publisher: { "@id": `${SITE.url}/#organization` },
            isPartOf: { "@id": `${SITE.url}/#website` },
            description:
                "MP4 videoyu MP3â€™e Ã§eviren Ã¼cretsiz dÃ¶nÃ¼ÅŸtÃ¼rÃ¼cÃ¼. Upload yok, dÃ¶nÃ¼ÅŸÃ¼m tarayÄ±cÄ± iÃ§inde yapÄ±lÄ±r.",
        },

        // FAQPage entity
        {
            "@type": "FAQPage",
            "@id": `${pageUrl}#faq`,
            url: pageUrl,
            inLanguage: "tr",
            mainEntity: [
                {
                    "@type": "Question",
                    name: "DosyalarÄ±m sunucuya yÃ¼kleniyor mu?",
                    acceptedAnswer: {
                        "@type": "Answer",
                        text: "HayÄ±r. MP4 â†’ MP3 dÃ¶nÃ¼ÅŸtÃ¼rme iÅŸlemi tamamen tarayÄ±cÄ±nÄ±zda yapÄ±lÄ±r. DosyanÄ±z sunucuya yÃ¼klenmez.",
                    },
                },
                {
                    "@type": "Question",
                    name: "MP4 to MP3 aracÄ± Ã¼cretsiz mi?",
                    acceptedAnswer: {
                        "@type": "Answer",
                        text: "Evet. Ãœcretsiz olarak sÄ±nÄ±rsÄ±z dÃ¶nÃ¼ÅŸÃ¼m yapabilirsiniz.",
                    },
                },
                {
                    "@type": "Question",
                    name: "Mobilde Ã§alÄ±ÅŸÄ±r mÄ±?",
                    acceptedAnswer: {
                        "@type": "Answer",
                        text: "Evet, modern mobil tarayÄ±cÄ±larda da Ã§alÄ±ÅŸÄ±r. BÃ¼yÃ¼k videolarda cihaz performansÄ±na gÃ¶re sÃ¼re uzayabilir.",
                    },
                },
            ],
        },

        // Breadcrumb
        {
            "@type": "BreadcrumbList",
            "@id": `${pageUrl}#breadcrumb`,
            itemListElement: [
                {
                    "@type": "ListItem",
                    position: 1,
                    name: "Anasayfa",
                    item: homeUrl,
                },
                {
                    "@type": "ListItem",
                    position: 2,
                    name: "MP4 to MP3",
                    item: pageUrl,
                },
            ],
        },
    ]}
>
    <header class="topbar">
        <div class="container topbar-inner">
            <nav class="nav nav-left" aria-label="Primary left">
                <a href="/" class="back-link" id="t-back">â† Geri</a>
            </nav>

            <a class="brand" href="/" aria-label="Convert Tools">
                <span class="brand-mark">CT</span>
            </a>

            <div class="topbar-right">
                <nav class="nav nav-right" aria-label="Primary right">
                    <a href="/#tools" id="t-navTools">AraÃ§lar</a>
                </nav>

                <div class="lang-switch" aria-label="Language switch">
                    <button class="lang-btn" type="button" data-lang="tr"
                        >TR</button
                    >
                    <button class="lang-btn" type="button" data-lang="en"
                        >EN</button
                    >
                </div>
            </div>
        </div>
    </header>

    <section class="page" id="top">
        <div class="container">
            <div class="mini-hero" id="miniHero">
                <span class="badge" id="t-badge">Ãœcretsiz & SÄ±nÄ±rsÄ±z</span>
                <h1 class="page-title" id="t-title">
                    Saku MP4 to MP3 â€“ Videoâ€™dan MP3 Ã‡evir (TarayÄ±cÄ± Ä°Ã§i)
                </h1>
                <p class="page-subtitle muted" id="t-sub">
                    MP4 videonu MP3â€™e Ã§evir. Ä°ÅŸlemler tarayÄ±cÄ±da olur, upload
                    yok.
                </p>

                <div class="mini-features">
                    <span id="t-f1">ğŸ¬ MP4</span>
                    <span id="t-f2">ğŸ§ MP3</span>
                    <span id="t-f3">ğŸ”’ Upload yok</span>
                </div>
            </div>

            <div style="height:14px;"></div>

            <div class="panel">
                <div class="panel-head">
                    <div class="breadcrumb">
                        <a href="/" id="t-bcHome">Anasayfa</a>
                        <span class="sep">â€º</span>
                        <span id="t-bcHere">MP4 to MP3</span>
                    </div>
                </div>

                <input id="file" type="file" accept="video/*" hidden />

                <div class="upload-box" id="dropZone">
                    <div class="upload-state is-idle">
                        <div class="upload-icon">â¬‡</div>
                        <div class="upload-text">
                            <label for="file" class="choose-link">
                                <b id="t-choose">Video seÃ§</b>
                            </label>
                            <span id="idleHint">veya buraya sÃ¼rÃ¼kle.</span>
                        </div>
                    </div>

                    <div class="upload-state is-processing" hidden>
                        <div class="upload-spinner"></div>
                        <div class="upload-text">
                            <b id="t-processing">Ä°ÅŸleniyorâ€¦</b>
                        </div>
                    </div>

                    <div class="upload-state is-done" hidden>
                        <div class="upload-text">
                            <span id="t-ready">HazÄ±r!</span>
                            <a href="#" id="uploadMore" class="choose-link">
                                <b id="t-uploadMore">BaÅŸka yÃ¼kle?</b>
                            </a>
                        </div>
                    </div>
                </div>

                <div id="controls" class="controls" hidden>
                    <div class="row">
                        <p class="muted" style="margin:0" id="fileLine">â€”</p>
                        <p class="muted" style="margin:0" id="statusLine">â€”</p>
                    </div>

                    <div class="btn-row">
                        <button id="convert" type="button"
                            >MP3'e dÃ¶nÃ¼ÅŸtÃ¼r</button
                        >
                        <button
                            id="download"
                            type="button"
                            class="ghost-btn"
                            disabled
                        >
                            Ä°ndir
                        </button>
                        <button id="reset" type="button" class="ghost-btn"
                            >SÄ±fÄ±rla</button
                        >
                    </div>

                    <div class="progress-wrap" hidden id="progressWrap">
                        <div
                            class="muted"
                            style="display:flex;justify-content:space-between;gap:10px;"
                        >
                            <span id="progressText">â€”</span>
                            <span id="progressPct">0%</span>
                        </div>

                        <div class="progress-bar">
                            <div
                                class="progress-fill"
                                id="progressFill"
                                style="width:0%"
                            >
                            </div>
                        </div>
                    </div>

                    <p id="result" class="muted" style="margin-top:10px;"></p>
                </div>
            </div>

            {/* âœ… SEO TEXT PANEL (Image Converter sayfan gibi) */}
            <div class="panel">
                <section class="seo-text" style="margin-top:18px">
                    <h2 id="t-seoH2">
                        MP4 to MP3 (Saku Convert) NasÄ±l Ã‡alÄ±ÅŸÄ±r?
                    </h2>

                    <p class="seo-lead" id="t-seoLead">
                        Saku Convert ile MP4 videonu MP3â€™e Ã¼cretsiz dÃ¶nÃ¼ÅŸtÃ¼r.
                        Ä°ÅŸlemler tarayÄ±cÄ±da yapÄ±lÄ±r, upload yok.
                    </p>

                    <details class="seo-details">
                        <summary id="t-seoSummary">DetaylarÄ± gÃ¶ster</summary>
                        <div class="details-content">
                            <p id="t-seoP1">
                                Saku MP4 to MP3 aracÄ± ile videolarÄ±nÄ± hÄ±zlÄ±ca
                                MP3â€™e Ã§evirebilirsin. Bu bir online dÃ¶nÃ¼ÅŸtÃ¼rÃ¼cÃ¼
                                gibi gÃ¶rÃ¼nÃ¼r ama dÃ¶nÃ¼ÅŸÃ¼m tamamen tarayÄ±cÄ± iÃ§inde
                                gerÃ§ekleÅŸir; dosyalarÄ±n sunucuya yÃ¼klenmez.
                            </p>
                            <p id="t-seoP2">
                                â€œMP4 MP3 Ã§eviriciâ€, â€œMP4â€™Ã¼ MP3â€™e dÃ¶nÃ¼ÅŸtÃ¼râ€,
                                â€œSaku MP4 to MP3â€ gibi aramalarda hÄ±zlÄ± ve
                                gizlilik dostu bir Ã§Ã¶zÃ¼m sunar.
                            </p>
                        </div>
                    </details>
                </section>
            </div>

            <style>
                .controls {
                    margin-top: 14px;
                }
                .controls .row {
                    display: flex;
                    justify-content: space-between;
                    gap: 10px;
                    flex-wrap: wrap;
                }
                .btn-row {
                    display: flex;
                    gap: 12px;
                    flex-wrap: wrap;
                    margin-top: 12px;
                    align-items: center;
                }
                .ghost-btn {
                    background: rgba(255, 255, 255, 0.75);
                    color: #0f172a;
                    border: 1px solid rgba(148, 163, 184, 0.45);
                    box-shadow: 0 10px 26px rgba(15, 23, 42, 0.06);
                }
                .ghost-btn:hover {
                    transform: none;
                    filter: none;
                }
                .progress-wrap {
                    margin-top: 12px;
                }
                .progress-bar {
                    height: 10px;
                    border-radius: 999px;
                    background: rgba(148, 163, 184, 0.25);
                    overflow: hidden;
                    margin-top: 6px;
                }
                .progress-fill {
                    height: 100%;
                    border-radius: 999px;
                    background: rgba(79, 70, 229, 0.8);
                    width: 0%;
                }
            </style>

            {/* âœ… Client JS */}
            <script type="module" src={mp4ClientUrl}></script>

            {
                /* âœ… SEO section EN Ã§evirisi (import yok, sadece localStorage + navigator) */
            }
            <script>
                (() => {
                    try {
                        const stored = localStorage.getItem("lang");
                        const nav = (navigator.language || "tr").toLowerCase();
                        const lang =
                            stored || (nav.startsWith("tr") ? "tr" : "en");

                        const set = (id, value) => {
                            const el = document.getElementById(id);
                            if (el && value != null) el.textContent = value;
                        };

                        if (lang === "en") {
                            set("t-seoH2", "How does Saku MP4 to MP3 work?");
                            set(
                                "t-seoLead",
                                "Convert MP4 to MP3 for free with Saku Convert. Everything runs in your browserâ€”no uploads.",
                            );
                            set("t-seoSummary", "Show details");
                            set(
                                "t-seoP1",
                                "Saku MP4 to MP3 lets you extract audio from your videos quickly. It looks like an online converter, but the conversion happens locally in your browserâ€”your files are not uploaded to any server.",
                            );
                            set(
                                "t-seoP2",
                                "Itâ€™s a fast and privacy-friendly solution for searches like â€œMP4 to MP3 converterâ€ and â€œconvert MP4 to MP3â€.",
                            );
                        }
                    } catch {}
                })();
            </script>
        </div>
    </section>
</BaseLayout>
