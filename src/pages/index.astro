---
import BaseLayout from "../layouts/BaseLayout.astro";

const tools = [
    {
        key: "img",
        href: "/image-converter#top",
        title: "Image Converter",
        desc: "PNG, JPG, WebP ve daha fazlasÄ± arasÄ±nda hÄ±zlÄ± geÃ§iÅŸ yapÄ±n.",
        cta: "Hemen DÃ¶nÃ¼ÅŸtÃ¼r â†’",
        color: "blue",
        icon: `
      <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"
        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <rect width="18" height="18" x="3" y="3" rx="2" ry="2"></rect>
        <circle cx="9" cy="9" r="2"></circle>
        <path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"></path>
      </svg>
    `,
    },
    {
        key: "bg",
        href: "/background-remover#top",
        title: "Background Remover",
        desc: "Tek tÄ±kla arka planÄ± ÅŸeffaf yapÄ±n (tarayÄ±cÄ± iÃ§inde).",
        cta: "Arka PlanÄ± Sil â†’",
        color: "purple",
        icon: `
      <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"
        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M4 22V4c0-.5.2-1 .6-1.4C5 2.2 5.5 2 6 2h12c.5 0 1 .2 1.4.6.4.4.6.9.6 1.4v18l-4-4-4 4-4-4-4 4Z"></path>
      </svg>
    `,
    },
];

const comingSoon = [
    { title: "PDF Compressor", desc: "PDF boyutunu kÃ¼Ã§Ã¼lt (kaliteyi koru)." },
    { title: "DOCX â†” PDF", desc: "Word â†” PDF dÃ¶nÃ¼ÅŸtÃ¼rme (yakÄ±nda)." },
    { title: "Batch Convert", desc: "Toplu gÃ¶rsel dÃ¶nÃ¼ÅŸtÃ¼rme." },
];
---

<BaseLayout
    title="Ãœcretsiz GÃ¶rsel AraÃ§larÄ±"
    description="GÃ¶rsellerinizi saniyeler iÃ§inde dÃ¶nÃ¼ÅŸtÃ¼rÃ¼n, arka planlarÄ± temizleyin. Tamamen tarayÄ±cÄ±nÄ±zda Ã§alÄ±ÅŸÄ±r."
    canonical="/"
    lang="tr"
    ogImage="/og/og-home.png"
    jsonLd={{
        "@context": "https://schema.org",
        "@type": "WebSite",
        name: "Convert Tools",
        url: "https://convert-toolss.pages.dev",
        description:
            "GÃ¶rsellerinizi saniyeler iÃ§inde dÃ¶nÃ¼ÅŸtÃ¼rÃ¼n, arka planlarÄ± temizleyin. Tamamen tarayÄ±cÄ±nÄ±zda Ã§alÄ±ÅŸÄ±r.",
        inLanguage: "tr",
        potentialAction: {
            "@type": "SearchAction",
            target: "https://convert-toolss.pages.dev/?q={search_term_string}",
            "query-input": "required name=search_term_string",
        },
    }}
>
    <header class="topbar">
        <div class="container topbar-inner">
            <nav class="nav nav-left" aria-label="Primary left">
                <a href="#roadmap" id="t-navRoadmap">Roadmap</a>
            </nav>

            <a class="brand" href="/" aria-label="Convert Tools">
                <span class="brand-mark">CT</span>
            </a>

            <!-- SAÄ SÃœTUN: en saÄŸa hizalÄ± (Tools + Dil Switch) -->
            <div class="topbar-right">
                <nav class="nav nav-right" aria-label="Primary right">
                    <a href="#tools" id="t-navTools">AraÃ§lar</a>
                </nav>

                <div class="lang-switch" aria-label="Language switch">
                    <button class="lang-btn" type="button" data-lang="tr"
                        >TR</button
                    >
                    <button class="lang-btn" type="button" data-lang="en"
                        >EN</button
                    >
                </div>
            </div>
        </div>
    </header>

    <section class="hero-wrap" id="top">
        <div class="container">
            <div class="hero-box">
                <span class="badge" id="t-badge">Ãœcretsiz & SÄ±nÄ±rsÄ±z</span>
                <h1 id="t-heroTitle">
                    Ãœcretsiz Image Converter & Background Remover
                </h1>
                <p id="t-heroDesc">
                    GÃ¶rsellerinizi saniyeler iÃ§inde dÃ¶nÃ¼ÅŸtÃ¼rÃ¼n, arka planlarÄ±
                    temizleyin. Ãœstelik tamamen tarayÄ±cÄ±nÄ±zda Ã§alÄ±ÅŸÄ±r.
                </p>

                <div class="hero-cta">
                    <a class="primary-btn" href="#tools" id="t-cta"
                        >AraÃ§larÄ± GÃ¶r â†’</a
                    >
                    <span class="hero-note muted" id="t-note"
                        >ğŸ”’ Dosyalar sunucuya yÃ¼klenmez</span
                    >
                </div>
            </div>
        </div>
    </section>

    <section class="tools-grid" id="tools">
        <div class="container">
            <div class="section-head">
                <h2 id="t-toolsHead">AraÃ§lar</h2>
                <p class="muted" id="t-toolsDesc">
                    HÄ±zlÄ± ve gÃ¼venli dijital medya araÃ§larÄ±mÄ±zla tanÄ±ÅŸÄ±n:
                </p>
            </div>

            <div class="grid">
                {
                    tools.map((t) => (
                        <a href={t.href} class="tool-card">
                            <div
                                class={`card-icon ${t.color}`}
                                set:html={t.icon}
                            />
                            <h3 id={`t-${t.key}-title`}>{t.title}</h3>
                            <p id={`t-${t.key}-desc`}>{t.desc}</p>
                            <span class="btn-text" id={`t-${t.key}-cta`}>
                                {t.cta}
                            </span>
                        </a>
                    ))
                }
            </div>
        </div>
    </section>

    <section class="features-wrap">
        <div class="container">
            <div class="features-box">
                <div class="features-inner">
                    <span id="t-f1">âš¡ HÄ±zlÄ± Ä°ÅŸlem</span>
                    <span id="t-f2"
                        >ğŸ”’ %100 GÃ¼venli (Dosyalar sunucuya yÃ¼klenmez)</span
                    >
                    <span id="t-f3">âœ¨ YÃ¼ksek Kalite</span>
                </div>
            </div>
        </div>
    </section>

    <section class="roadmap-wrap" id="roadmap">
        <div class="container">
            <div class="roadmap-box">
                <div class="section-head">
                    <h2 id="t-roadmapHead">YakÄ±nda</h2>
                    <p class="muted" id="t-roadmapDesc">
                        SÃ¼rekli yeni araÃ§lar ekliyoruz. Ä°ÅŸte Ã¼zerinde
                        Ã§alÄ±ÅŸtÄ±ÄŸÄ±mÄ±z bazÄ± Ã¶zellikler:
                    </p>
                </div>

                <div class="soon-grid">
                    {
                        comingSoon.map((c) => (
                            <div class="soon-card">
                                <div class="soon-title">{c.title}</div>
                                <div class="soon-desc">{c.desc}</div>
                            </div>
                        ))
                    }
                </div>
            </div>
        </div>
    </section>

    <footer class="footer-wrap">
        <div class="container">
            <div class="footer-box footer-inner">
                <span
                    >Â© {new Date().getFullYear()} Â· A project by Saku Studios</span
                >
                <span class="muted" id="t-footerRight"
                    >All processing happens in your browser.</span
                >
            </div>
        </div>
    </footer>

    <script type="module">
        import { i18n } from "/i18n.js";
        import { detectLang } from "/utils/lang.js";

        const lang = detectLang();
        const t = i18n[lang] || i18n.en;

        const set = (id, value) => {
            const el = document.getElementById(id);
            if (el) el.textContent = value;
        };

        // Landing text
        set("t-badge", t.badge);
        set("t-heroTitle", t.heroTitle);
        set("t-heroDesc", t.heroDesc);
        set("t-cta", t.cta);
        set("t-note", t.note);

        set("t-toolsHead", t.toolsHead);
        set("t-toolsDesc", t.toolsDesc);

        set("t-roadmapHead", t.roadmapHead);
        set("t-roadmapDesc", t.roadmapDesc);

        set("t-footerRight", t.footerRight);

        // Nav labels
        set("t-navTools", t.toolsHead);
        set("t-navRoadmap", "Roadmap");

        // Features line
        if (lang === "en") {
            set("t-f1", "âš¡ Fast");
            set("t-f2", "ğŸ”’ 100% Secure (no uploads)");
            set("t-f3", "âœ¨ High Quality");
        }

        // Tool cards
        if (lang === "tr") {
            set("t-img-title", "GÃ¶rsel DÃ¶nÃ¼ÅŸtÃ¼rÃ¼cÃ¼");
            set(
                "t-img-desc",
                "PNG, JPG, WebP ve daha fazlasÄ± arasÄ±nda hÄ±zlÄ± geÃ§iÅŸ yapÄ±n.",
            );
            set("t-img-cta", "Hemen DÃ¶nÃ¼ÅŸtÃ¼r â†’");

            set("t-bg-title", "Arka Plan Silici");
            set(
                "t-bg-desc",
                "Tek tÄ±kla arka planÄ± ÅŸeffaf yapÄ±n (tarayÄ±cÄ± iÃ§inde).",
            );
            set("t-bg-cta", "Arka PlanÄ± Sil â†’");
        } else {
            set("t-img-title", "Image Converter");
            set(
                "t-img-desc",
                "Quickly convert between PNG, JPG, WebP and more.",
            );
            set("t-img-cta", "Convert Now â†’");

            set("t-bg-title", "Background Remover");
            set("t-bg-desc", "Remove backgrounds in one click (in-browser).");
            set("t-bg-cta", "Remove Background â†’");
        }

        document.documentElement.lang = lang;

        // ===== Language switch =====
        const langBtns = document.querySelectorAll(".lang-btn");

        function applyLangActive() {
            const current = localStorage.getItem("lang") || lang;
            langBtns.forEach((b) =>
                b.classList.toggle("is-active", b.dataset.lang === current),
            );
        }

        langBtns.forEach((btn) => {
            btn.addEventListener("click", () => {
                const next = btn.dataset.lang;
                localStorage.setItem("lang", next);
                location.reload();
            });
        });

        applyLangActive();
    </script>
</BaseLayout>
